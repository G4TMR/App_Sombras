<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ficha de Agente | Sombras do Abismo</title>
    <link rel="stylesheet" href="style.css">
</head>
<body data-page="agentes">
    <div class="background-overlay"></div>
    <div id="header-placeholder"></div>

    <main id="sheet-container" class="sheet-container" style="display: none;">
        <!-- Cabeçalho da Ficha -->
        <header class="sheet-header">
            <div>
                <h2 id="sheet-char-name">Nome do Agente</h2>
                <p id="sheet-char-element" class="sheet-element-tag"></p>
                <p id="sheet-char-class-player">Classe | Jogador</p>
            </div>
        </header>

        <!-- Corpo da Ficha -->
        <div class="sheet-main-desktop">
            <!-- Coluna Esquerda: Status -->
            <div class="sheet-col-left">
                <section class="sheet-section">
                    <h3>Atributos</h3>
                    <div class="primary-attributes-display">
                        <div class="primary-attr-block" data-attr="forca">
                            <span class="primary-attr-icon"><svg class="attr-svg-icon" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M18.5,8.5c-1.1,0-2,0.9-2,2s0.9,2,2,2s2-0.9,2-2S19.6,8.5,18.5,8.5z M12,13c-1.66,0-3-1.34-3-3s1.34-3,3-3,3,1.34,3,3 S13.66,13,12,13z M5.5,10.5c1.1,0,2-0.9,2-2s-0.9-2-2-2s-2,0.9-2,2S4.4,10.5,5.5,10.5z M12,2C6.48,2,2,6.48,2,12s4.48,10,10,10 s10-4.48,10-10S17.52,2,12,2z M12,20c-4.41,0-8-3.59-8-8s3.59-8,8-8s8,3.59,8,8S16.41,20,12,20z"/></svg></span>
                            <span class="primary-attr-label">Força</span>
                            <span id="sheet-forca" class="primary-attr-value">--</span>
                        </div>
                        <div class="primary-attr-block" data-attr="agilidade">
                            <span class="primary-attr-icon"><svg class="attr-svg-icon" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M4,18l8.5-6L4,6V18z M13,6v12l8.5-6L13,6z"/></svg></span>
                            <span class="primary-attr-label">Agilidade</span>
                            <span id="sheet-agilidade" class="primary-attr-value">--</span>
                        </div>
                        <div class="primary-attr-block" data-attr="presenca">
                            <span class="primary-attr-icon"><svg class="attr-svg-icon" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12,4.5C7,4.5,2.73,7.61,1,12c1.73,4.39,6,7.5,11,7.5s9.27-3.11,11-7.5C21.27,7.61,17,4.5,12,4.5z M12,14.5 c-2.48,0-4.5-2.02-4.5-4.5S9.52,5.5,12,5.5s4.5,2.02,4.5,4.5S14.48,14.5,12,14.5z M12,7.5C10.62,7.5,9.5,8.62,9.5,10 s1.12,2.5,2.5,2.5s2.5-1.12,2.5-2.5S13.38,7.5,12,7.5z"/></svg></span>
                            <span class="primary-attr-label">Presença</span>
                            <span id="sheet-presenca" class="primary-attr-value">--</span>
                        </div>
                        <div class="primary-attr-block" data-attr="vitalidade">
                            <span class="primary-attr-icon"><svg class="attr-svg-icon" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12,1L3,5v6c0,5.55,3.84,10.74,9,12c5.16-1.26,9-6.45,9-12V5L12,1z"/></svg></span>
                            <span class="primary-attr-label">Vitalidade</span>
                            <span id="sheet-vitalidade" class="primary-attr-value">--</span>
                        </div>
                        <div class="primary-attr-block" data-attr="inteligencia">
                            <span class="primary-attr-icon"><svg class="attr-svg-icon" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12,2C6.48,2,2,6.48,2,12s4.48,10,10,10s10-4.48,10-10S17.52,2,12,2z M12,20c-4.41,0-8-3.59-8-8s3.59-8,8-8 s8,3.59,8,8S16.41,20,12,20z M12.5,15.5h-1V14h1V15.5z M12.5,12.5h-1V7h1V12.5z"/></svg></span>
                            <span class="primary-attr-label">Inteligência</span>
                            <span id="sheet-inteligencia" class="primary-attr-value">--</span>
                        </div>
                    </div>

                    <div class="status-bars-container">
                        <div class="status-bar-wrapper">
                            <div class="status-bar-info">
                                <span class="status-bar-label">HP</span>
                                <div class="status-bar-values-editable">
                                    <button class="status-btn minus" data-stat="hp_current" data-amount="-1" title="Diminuir HP">-</button>
                                    <span id="hp-current" class="status-value-display">--</span>
                                    <button class="status-btn plus" data-stat="hp_current" data-amount="1" title="Aumentar HP">+</button>
                                    <span class="separator">/</span>
                                    <input type="number" id="hp-max" class="status-input" title="HP Máximo">
                                </div>
                            </div>
                            <div class="status-bar-background"><div id="hp-bar-fill" class="status-bar-fill hp"></div></div>
                        </div>
                        <div class="status-bar-wrapper">
                            <div class="status-bar-info">
                                <span class="status-bar-label">SAN</span>
                                <div class="status-bar-values-editable">
                                    <button class="status-btn minus" data-stat="sanity_current" data-amount="-1" title="Diminuir Sanidade">-</button>
                                    <span id="sanity-current" class="status-value-display">--</span>
                                    <button class="status-btn plus" data-stat="sanity_current" data-amount="1" title="Aumentar Sanidade">+</button>
                                    <span class="separator">/</span>
                                    <input type="number" id="sanity-max" class="status-input" title="Sanidade Máxima">
                                </div>
                            </div>
                            <div class="status-bar-background"><div id="sanity-bar-fill" class="status-bar-fill sanity"></div></div>
                        </div>
                        <div class="status-bar-wrapper">
                            <div class="status-bar-info">
                                <span class="status-bar-label">PA</span>
                                <div class="status-bar-values-editable">
                                    <button class="status-btn minus" data-stat="pa_current" data-amount="-1" title="Diminuir PA">-</button>
                                    <span id="pa-current" class="status-value-display">--</span>
                                    <button class="status-btn plus" data-stat="pa_current" data-amount="1" title="Aumentar PA">+</button>
                                    <span class="separator">/</span>
                                    <input type="number" id="pa-max" class="status-input" title="PA Máximo">
                                </div>
                            </div>
                            <div class="status-bar-background"><div id="pa-bar-fill" class="status-bar-fill pa"></div></div>
                        </div>
                    </div>
                    <div class="defense-container">
                        <div class="defense-shield">
                            <span id="sheet-defense" class="defense-value">--</span>
                        </div>
                        <span class="defense-label">Defesa Total</span>
                    </div>
                    <div class="proficiencies-box">
                        <h4>Proficiências</h4>
                        <p id="sheet-proficiencies">Proficiente com: Armas simples.</p>
                    </div>
                    <div class="progression-container">
                        <div class="progression-block">
                            <span class="progression-label">Nível</span>
                            <span id="sheet-level" class="progression-value">--</span>
                        </div>
                        <div class="progression-block">
                            <span class="progression-label">XP</span>
                            <span id="sheet-xp" class="progression-value">--</span>
                        </div>
                        <div class="progression-block">
                            <span class="progression-label">Pontos de Atributo</span>
                            <span id="sheet-attribute-points" class="progression-value">--</span>
                        </div>
                        <div class="progression-block">
                            <span class="progression-label">Pontos de Habilidade</span>
                            <span id="sheet-skill-points" class="progression-value">--</span>
                        </div>
                        <button id="add-xp-btn">Adicionar XP</button>
                        <button id="level-up-btn" style="display: none;">Level Up</button>
                    </div>
                    <div class="resistances-container">
                        <h3>Resistências</h3>
                        <div class="resistances-grid">
                            <div class="resistance-block">
                                <span class="resistance-label">Proteção</span>
                                <span id="sheet-protection" class="resistance-value">0</span>
                            </div>
                            <div class="resistance-block">
                                <span class="resistance-label">Balística</span>
                                <span id="sheet-res-balistica" class="resistance-value">0</span>
                            </div>
                            <div class="resistance-block">
                                <span class="resistance-label">Corte</span>
                                <span id="sheet-res-corte" class="resistance-value">0</span>
                            </div>
                            <div class="resistance-block">
                                <span class="resistance-label">Paranormal</span>
                                <span id="sheet-res-paranormal" class="resistance-value">0</span>
                            </div>
                        </div>
                    </div>
                </section>
            </div>

            <!-- Coluna Central: Atributos e Detalhes -->
            <div class="sheet-col-center">
                <section class="sheet-section skills-section">
                    <h3>Habilidades de Classe</h3>
                    <div id="class-skill-tree-container" class="skill-tree-container"></div>
                </section>
                <section class="sheet-section skills-section">
                    <h3>Habilidades de Atributo</h3>
                    <div id="attribute-skill-tree-container" class="skill-tree-container"></div>
                </section>
            </div>

            <!-- Coluna Direita: Habilidades, Inventário e História -->
            <div class="sheet-col-right">
                <div class="actions-accordion">
                    <div class="accordion-panel">
                        <button class="accordion-header">Inventário</button>
                        <div class="accordion-content">
                            <ul id="sheet-inventory-list" class="inventory-list"></ul>
                            <form id="add-item-form" class="add-item-form">
                                <input type="text" id="add-item-input" class="add-item-input" placeholder="Novo item...">
                                <button type="submit" class="add-item-btn">+</button>
                            </form>
                        </div>
                    </div>
                    <div class="accordion-panel">
                        <button class="accordion-header">Detalhes e Origem</button>
                        <div class="accordion-content">
                            <div class="details-group">
                                <h4>Aparência</h4>
                                <textarea id="sheet-appearance" class="details-textarea" rows="3"></textarea>
                            </div>
                            <div class="details-group">
                                <h4>História</h4>
                                <textarea id="sheet-history" class="details-textarea" rows="5"></textarea>
                            </div>
                            <div class="details-group">
                                <h4>Motivação</h4>
                                <textarea id="sheet-motivation" class="details-textarea" rows="3"></textarea>
                            </div>
                        </div>
                    </div>
                    <div class="accordion-panel">
                        <button class="accordion-header">Rolagem de Dados</button>
                        <div class="accordion-content">
                            <form id="dice-roller-form" class="dice-roller-form">
                                <input type="number" id="dice-count" value="1">
                                <span>d</span>
                                <select id="dice-type">
                                    <option>4</option>
                                    <option>6</option>
                                    <option>8</option>
                                    <option>10</option>
                                    <option>12</option>
                                    <option selected>20</option>
                                    <option>100</option>
                                </select>
                                <span>+</span>
                                <input type="number" id="dice-bonus" value="0">
                                <button type="submit" class="roll-btn">Rolar</button>
                            </form>
                            <div id="roll-log" class="roll-log">
                                <p class="log-placeholder">O resultado das rolagens aparecerá aqui.</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <div id="character-not-found" style="display: none; text-align: center; padding: 4rem;">
        <h2>Agente não encontrado</h2>
        <p>O agente que você está procurando não foi encontrado. <a href="agentes.html">Voltar para a lista de agentes.</a></p>
    </div>

    <script src="script.js"></script>
</body>
</html>